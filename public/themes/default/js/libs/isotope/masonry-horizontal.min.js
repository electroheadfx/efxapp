!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["get-size/get-size","isotope/js/layout-mode"],b):"object"==typeof module&&module.exports?module.exports=b(require("get-size"),require("isotope-layout/js/layout-mode")):b(a.getSize,a.Isotope.LayoutMode)}(window,function(a,b){"use strict";var c=b.create("masonryHorizontal"),d=c.prototype;return d._resetLayout=function(){this.getRowHeight(),this._getMeasurement("gutter","outerHeight"),this.rowHeight+=this.gutter,this.rows=Math.floor((this.isotope.size.innerHeight+this.gutter)/this.rowHeight),this.rows=Math.max(this.rows,1);var a=this.rows;for(this.rowXs=[];a--;)this.rowXs.push(0);this.maxX=0},d._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerHeight%this.rowHeight,c=b&&1>b?"round":"ceil",d=Math[c](a.size.outerHeight/this.rowHeight);d=Math.min(d,this.rows);for(var e=this._getRowGroup(d),f=Math.min.apply(Math,e),g=e.indexOf(f),h={x:f,y:this.rowHeight*g},i=f+a.size.outerWidth,j=this.rows+1-e.length,k=0;j>k;k++)this.rowXs[g+k]=i;return h},d._getRowGroup=function(a){if(2>a)return this.rowXs;for(var b=[],c=this.rows+1-a,d=0;c>d;d++){var e=this.rowXs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d._manageStamp=function(b){var c=a(b),d=this.isotope._getElementOffset(b),e=this._getOption("originTop")?d.top:d.bottom,f=e+c.outerHeight,g=Math.floor(e/this.rowHeight);g=Math.max(0,g);var h=Math.floor(f/this.rowHeight);h=Math.min(this.rows-1,h);for(var i=(this._getOption("originLeft")?d.left:d.right)+c.outerWidth,j=g;h>=j;j++)this.rowXs[j]=Math.max(i,this.rowXs[j])},d._getContainerSize=function(){return this.maxX=Math.max.apply(Math,this.rowXs),{width:this.maxX}},d.needsResizeLayout=function(){return this.needsVerticalResizeLayout()},c});