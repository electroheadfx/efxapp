!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Sketchfab=b():a.Sketchfab=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/static/builds/web/dist/",b(b.s=1)}([function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(a,b){a.forEach(function(a){this[a]=function(){var c,d=b._requestIdCounter++,e=Array.prototype.slice.call(arguments);if(e.length>0){var f=e[e.length-1];"function"==typeof f&&(c=e.pop())}c&&(b._pendingRequests[d]=c.bind(this)),b._target.postMessage({type:"api.request",instanceId:b.getIdentifier(),requestId:d,member:a,arguments:e},"*")}},this),this.addEventListener=function(a,c){"viewerready"===a&&b.isViewerReady&&c(),b._eventListeners[a]||(b._eventListeners[a]=[]),b._eventListeners[a].push(c)},this.removeEventListener=function(a,c){if(b._eventListeners[a]){var d=b._eventListeners[a].indexOf(c);-1!==d&&b._eventListeners[a].splice(d,1)}}},d=function(a){this._target=a,this._requestIdCounter=0,this._pendingRequests={},this._eventListeners={},this._ready=!1;var b=Math.random().toString();this._identifier=b.substr(b.indexOf(".")+1),this.listenServer()};d.prototype={getIdentifier:function(){return this._identifier},use:function(a,b){this._version=a;var d=function(a,b){var d=this._requestIdCounter++;this._pendingRequests[d]=function(a,d,e){a?b.call(this,a):b.call(this,null,new c(e,this))}.bind(this),this._target.postMessage({type:"api.initialize",requestId:d,name:a},"*")}.bind(this),e=function(){d(a,b)}.bind(this);this._ready?e():this.initAPI=e},listenServer:function(){window.addEventListener("message",function(a){if(("api.ready"===a.data.type||"api.initialize.result"===a.data.type||"api.request.result"===a.data.type||"api.event"===a.data.type)&&a.data.instanceId===this.getIdentifier())if("api.ready"===a.data.type&&(this._ready||(this._ready=!0,this.initAPI&&this.initAPI())),"api.event"===a.data.type){var b=a.data.results,c=b[0];if(this._eventListeners["*"]||this._eventListeners.all)return void["*","all"].forEach(function(a){this._eventListeners[a]&&this._eventListeners[a].forEach(function(a){a.apply(a,b)})},this);var d=b.slice(1);this._eventListeners[c]?this._eventListeners[c].forEach(function(a){a.apply(a,d)}):"viewerready"===c&&(this.isViewerReady=!0)}else{if(!this._pendingRequests[a.data.requestId])return;this._pendingRequests[a.data.requestId].apply(null,a.data.results)}}.bind(this))}},b["default"]=d},function(a,b,c){var d=c(0).default,e=function(a,b){this._target=b,this._version=a||"1.0.0",this._url="https://sketchfab.com/models/XXXX/embed",this._client=void 0,this._options=void 0};e.prototype={getEmbedURL:function(a,b){var c=this._url+"?api_version="+this._version+"&api_id="+this._client.getIdentifier();return b&&Object.keys(b).forEach(function(a){null!=b[a]&&"function"!=typeof b[a]&&(c+="&"+a.toString()+"="+b[a].toString())}),c.replace("XXXX",a)},init:function(a,b){this._options=b,this._client=new d(this._target.contentWindow),window.addEventListener("message",function(a){"api.ready"===a.data.type&&a.data.instanceId===this._client.getIdentifier()&&this._client.use(this._version,function(a,b){if(a)throw a;this.success.call(this,b)}.bind(this))}.bind(this)),this._target.src=this.getEmbedURL(a,b)},success:function(a){this._options.success&&"function"==typeof this._options.success&&this._options.success(a)},error:function(a){this._options.error&&"function"==typeof this._options.error&&this._options.error(a)}},a.exports=e}])});