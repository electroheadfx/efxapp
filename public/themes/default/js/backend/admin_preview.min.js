$(function(){function a(){var a=(location.hash,location.hash.match(/filter=([^&]+)/i)),b=a&&a[1];return b&&decodeURIComponent(b)}function b(){var b=a();(b||!k)&&(k=!0,e.isotope({layoutMode:"packery",itemSelector:".grid-item",filter:b,animationOptions:{duration:500,easing:"swing"}}),b&&($(".button-category .active").removeClass("active"),"*"==b?$(".button-category .all").addClass("active"):$(".button-category "+b).addClass("active")))}function c(a,b){var c;return function(){function d(){a(),c=null}c&&clearTimeout(c),c=setTimeout(d,b||100)}}$('[data-toggle="tooltip-project"],[data-toggle="tooltip-media"]').tooltip({placement:"auto top",container:"body",delay:{show:300,hide:200}}),$(".tooltip-post").tooltip({html:!0,delay:{show:50,hide:20}}),$(".tooltip-post-thumb").tooltip({html:!0,delay:{show:0,hide:0},template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner tooltip-inner-post-thumb"></div></div>'}),$(".tooltip-post-thumb").hover(function(){},function(){$(this).tooltip("hide")}),$(document).click(function(){$(".alert").hide()});var d,e=$("#articles"),f="*",g={layoutMode:"packery",itemSelector:".grid-item",filter:f,animationOptions:{duration:500,easing:"swing"}},h={layoutMode:"packery",itemSelector:".grid-item",filter:function(){return d?$(this).find("#tags").text().match(d):!0},animationOptions:{duration:500,easing:"swing"}},i=e.isotope(g),j=$(".button-category a.all").parent().next().find("a").data("id");$(".create").each(function(){var a=$(this).attr("href").split("?"),b=a[0],c=a[1].split("="),d=c[0];$(this).attr("href",b+"?"+d+"="+j)}),$filters=$(".filters .button-category a").on("click",function(a){a.preventDefault(),$(".collapse.navbar-collapse.navbar-right").removeClass("in"),$(".filters a.active").removeClass("active"),$(this).addClass("active"),$(".isotope-search").val(""),$(".glyphicon-move").css("cursor",""),$(".glyphicon-move .fa-arrows").css("opacity",1),f=$(this).data("filter");var b=$(this).data("id");return $(".create").each(function(){var a=$(this).attr("href").split("?"),c=a[0],d=a[1].split("="),e=d[0];$(this).attr("href",c+"?"+e+"="+b)}),location.hash="filter="+encodeURIComponent(f),i.isotope({filter:f}),Cookies.set("position_category",f),!1});var k=!1;$(window).on("hashchange",b),b(),$(".remove").click(function(){$(".isotope-search").val(""),d=new RegExp(m.val(),"gi"),$(".glyphicon-move").css("cursor",""),$(".glyphicon-move .fa-arrows").css("opacity",1),i.isotope(h),$.removeCookie("position_search")});var l=function(){e.isotope("layout")};$(".expander").each(function(){$(this).expander({slicePoint:$(".menu.active").data("slicepoint"),preserveWords:!0,widow:4,startExpanded:$(this).data("status_expander"),expandEffect:"fadeIn",userCollapseEffect:"fadeOut",afterExpand:l,afterCollapse:l,detailPrefix:" ",expandPrefix:" ",summaryClass:"expandsummary",expandText:'<span class="fa fa-plus-circle" ></span>',userCollapseText:'<span class="fa fa-minus-circle" ></span>'})}),$("a.attr-status, a.attr-permission, a.attr-featured, a.attr-locked").click(function(a){a.preventDefault(),trigger=$(this),$.ajax({method:"POST",url:trigger.attr("href"),success:function(a){trigger.empty().append(a.html),trigger.attr("href",a.url),attr="."+trigger.attr("class")+"-meta",attribute_toggle=trigger.attr("data-attr-toggle"),attribute_data=trigger.attr("data-attr"),meta_el=trigger.parent().parent().parent().find(attr),data_text=meta_el.attr("data-text-"+attribute_data),meta_el.text(data_text),trigger.attr("data-attr-toggle",attribute_data),trigger.attr("data-attr",attribute_toggle),""!=$(".isotope-search").val()&&$(".isotope-search").trigger("keyup"),$(".tooltip-post").tooltip()}})});var m=$(".isotope-search").keyup(c(function(){$(".glyphicon-move").css("cursor","default"),$(".glyphicon-move .fa-arrows").css("opacity",0),d=new RegExp(m.val(),"gi"),i.isotope(h),Cookies.set("position_search",m.val())},200)),n=function(a){a.target.className.indexOf("carousel-cell-image")>=0&&(player=$("#"+$(a.target).data("id")+"-player"),player.hasClass("loaded")||setTimeout(function(){player.addClass("loaded")},1e3)),this.removeEventListener("load",n)};window.addEventListener("lazyloaded",n),$(".content").each(function(){e[0].addEventListener("load",function(){var a,b=function(){a=!1,e.isotope("layout")};return function(){a||(a=!0,setTimeout(b,1e3))}}(),!0)})});